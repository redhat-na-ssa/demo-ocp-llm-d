# LLM-D Monitoring Stack

This directory contains the Kustomize configuration for deploying Prometheus and Grafana monitoring for the LLM-D environment.

## Components

- **Prometheus**: Metrics collection and storage
- **Grafana**: Visualization and dashboards
- **ConfigMaps**: Configuration for both services including datasources and dashboards

## Installation

### Using Kustomize

To deploy the monitoring stack:

```bash
kubectl apply -k gitops/instance/monitoring/
```

### Using kubectl directly (legacy)

Alternatively, you can use the individual commands:

```bash
kubectl create namespace llm-d-monitoring || true
kubectl apply -f gitops/instance/monitoring/grafana.yaml
kubectl apply -f gitops/instance/monitoring/grafana-service.yaml
kubectl apply -f gitops/instance/monitoring/prometheus.yaml
kubectl apply -f gitops/instance/monitoring/grafana-datasources.yaml
kubectl apply -f gitops/instance/monitoring/grafana-dashboards-config.yaml
kubectl apply -f gitops/instance/monitoring/grafana-config.yaml
kubectl apply -f gitops/instance/monitoring/prometheus-config.yaml
kubectl apply -f gitops/instance/monitoring/grafana-dashboard-llm-performance.json
```

## Files

- `namespace.yaml` - Creates the llm-d-monitoring namespace
- `prometheus.yaml` - Prometheus deployment and RBAC
- `prometheus-config.yaml` - Prometheus configuration ConfigMap
- `grafana.yaml` - Grafana deployment and ServiceAccount
- `grafana-service.yaml` - Grafana Service
- `grafana-config.yaml` - Grafana main configuration
- `grafana-datasources.yaml` - Grafana datasources configuration
- `grafana-dashboards-config.yaml` - Grafana dashboard provisioning configuration
- `grafana-dashboard-llm-performance.json` - LLM Performance dashboard
- `kustomization.yaml` - Kustomize configuration file

## Notes

The ConfigMap for the Grafana dashboard (`grafana-dashboard-llm-performance`) is automatically generated by Kustomize from the JSON file.
